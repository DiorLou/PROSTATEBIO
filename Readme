这是一个前列腺穿刺机器人的上位机测试程序

主要有三部分组成

机器人控制部分:
首先切换到TCP_tip,触碰A点(needle point)和O点(肛门点),保存他们的空间位置;
接着切换到TCP_O(TCP6个值为全0),使用tool坐标系将超声探头插入肛门后,先记录当前的End-Effect点的空间位置;
再点击“获取合适的Tar_Tcp_Z以及更新O点位置”,此举可以计算当前OE向量,并计算该向量在关节六z轴方向的投影,更新最新的O点位置;
此时再点击“设置Cur TCP”(看超声图像部分注意事项),以更改TCP_O的值(重启后还原),此时探头在肛门处的点(新的O点)为RCM点;
然后需要将探头上的超声平面旋转至初始位置,点击“使超声平面对齐AOE平面”,程序使探头绕机械臂末端z轴转动,使超声平面对齐AOE平面;
输入病灶点B点的位置,然后点击“绕AO旋转超声平面使经过B点”,使超声平面检测到B点

超声图像部分：
在探头插入肛门后,在点击“使超声平面对齐AOE平面”之前,需要先扫描前列腺,以确定病灶点的位置;
超声探头需要点击“超声探头左转45度”到达初始位置,再点击“超声探头右转90度”,在右转的过程中,每转1度会保存图片;
图片保存在当前目录的ultrasound_images_{timestamp}文件夹中，图片命名的格式为“当前的旋转度数+机器臂末端位姿(x,y,z,Rx,Ry,Rz)”;
注意:需要在TCP_O(TCP6个值为全0)下后转,上述部分完成之后才能点击“设置Cur TCP”

Beckhoff通信部分:
通过读写倍福变量,写reset变量为一触发reset使穿刺结构到默认位置;
写theta1,theta2数组控制针移动轨迹

